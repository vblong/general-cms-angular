{"ast":null,"code":"import { shareReplay } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nimport * as i2 from \"src/app/service/api-http-service\";\nimport * as i3 from \"src/app/service/api-endpoints.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/progress-spinner\";\nimport * as i7 from \"@angular/material/paginator\";\nimport * as i8 from \"@angular/material/list\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/icon\";\nimport * as i11 from \"@angular/material/badge\";\nimport * as i12 from \"@angular/material/tooltip\";\nimport * as i13 from \"../../../shared/classes/pipes/excerpt-filter/excerpt-filter\";\n\nfunction EntryListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"/entry\"];\n};\n\nconst _c1 = function (a0) {\n  return {\n    post_id: a0\n  };\n};\n\nconst _c2 = function (a0, a1) {\n  return {\n    \"content-first-post\": a0,\n    \"content-post\": a1\n  };\n};\n\nfunction EntryListComponent_div_2_mat_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-list\", 7);\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"div\", 9);\n    i0.ɵɵelementStart(3, \"div\", 10);\n    i0.ɵɵelementStart(4, \"mat-list-item\", 11);\n    i0.ɵɵelementStart(5, \"a\", 12);\n    i0.ɵɵelementStart(6, \"h2\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 13);\n    i0.ɵɵelementStart(9, \"div\", 14);\n    i0.ɵɵelementStart(10, \"button\", 15);\n    i0.ɵɵelementStart(11, \"mat-icon\", 16);\n    i0.ɵɵtext(12, \"favorite\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 14);\n    i0.ɵɵelementStart(14, \"button\", 15);\n    i0.ɵɵelementStart(15, \"mat-icon\", 17);\n    i0.ɵɵtext(16, \"messenger_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 14);\n    i0.ɵɵelementStart(18, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function EntryListComponent_div_2_mat_list_1_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.openSnackBar();\n    });\n    i0.ɵɵelementStart(19, \"mat-icon\");\n    i0.ɵɵtext(20, \"link\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 19);\n    i0.ɵɵelementStart(22, \"mat-list-item\", 20);\n    i0.ɵɵelement(23, \"p\", 21);\n    i0.ɵɵpipe(24, \"excerpt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 22);\n    i0.ɵɵelementStart(26, \"div\", 23);\n    i0.ɵɵelementStart(27, \"a\", 12);\n    i0.ɵɵelementStart(28, \"button\", 24);\n    i0.ɵɵtext(29, \"Read more\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 25);\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const entry_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(15, _c0))(\"queryParams\", i0.ɵɵpureFunction1(16, _c1, entry_r3.ID));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entry_r3.post_title);\n    i0.ɵɵadvance(8);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", entry_r3.comment_count);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(24, 9, entry_r3.post_content, 200), i0.ɵɵsanitizeHtml)(\"ngClass\", i0.ɵɵpureFunction2(18, _c2, i_r4 == 0, i_r4 !== 0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(21, _c0))(\"queryParams\", i0.ɵɵpureFunction1(22, _c1, entry_r3.ID));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" Last updated on \", i0.ɵɵpipeBind2(32, 12, entry_r3.post_modified, \"dd/MM/yyyy\"), \" \");\n  }\n}\n\nconst _c3 = function () {\n  return [5, 10, 25, 100];\n};\n\nfunction EntryListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, EntryListComponent_div_2_mat_list_1_Template, 33, 24, \"mat-list\", 5);\n    i0.ɵɵelementStart(2, \"mat-paginator\", 6);\n    i0.ɵɵlistener(\"page\", function EntryListComponent_div_2_Template_mat_paginator_page_2_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.getPaginatorData($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.entries);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"length\", ctx_r1.totalEntries)(\"pageIndex\", ctx_r1.paginatorIndex)(\"pageSize\", ctx_r1.pageSize)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c3))(\"showFirstLastButtons\", true);\n  }\n}\n\nexport let EntryListComponent = /*#__PURE__*/(() => {\n  class EntryListComponent {\n    constructor(_snackBar, _apiHttpService, _apiEndpointsService, _route) {\n      this._snackBar = _snackBar;\n      this._apiHttpService = _apiHttpService;\n      this._apiEndpointsService = _apiEndpointsService;\n      this._route = _route;\n      this.entries = [];\n      this.pageIndex = 1;\n      this.paginatorIndex = 0;\n      this.pageSize = 10;\n      this.totalEntries = 0;\n      this.totalPage = 0;\n      this.lowValue = 0;\n      this.highValue = 20;\n      this.isLoading = true;\n      this.tiles = [{\n        text: 'One',\n        cols: 3,\n        rows: 1,\n        color: 'lightblue'\n      }, {\n        text: 'Two',\n        cols: 1,\n        rows: 2,\n        color: 'lightgreen'\n      }, {\n        text: 'Three',\n        cols: 1,\n        rows: 1,\n        color: 'lightpink'\n      }, {\n        text: 'Four',\n        cols: 2,\n        rows: 1,\n        color: '#DDBDF1'\n      }];\n    }\n\n    ngOnInit() {\n      //  Get latest 10 entries\n      this.updateEntry();\n    }\n\n    updateEntry() {\n      //  Get latest 10 entries\n      let thisPtr = this;\n      thisPtr.isLoading = true;\n\n      let api = this._apiEndpointsService.getEntriesEndpoint(thisPtr.pageIndex, thisPtr.pageSize);\n\n      this.$entries = this._apiHttpService.get(api).pipe(shareReplay());\n      this.$entries.subscribe(data => {\n        console.log(\"Entries retrieve\");\n        thisPtr.entries = data;\n        thisPtr.updateTotalEntries();\n      }, error => {\n        console.log(\"Error while retrieving entries. Retrying...\");\n        console.log(error);\n        this.updateEntry();\n      }); //  Get total number of entries\n      // this.updateTotalEntries();\n    }\n\n    updateTotalEntries() {\n      let thisPtr = this;\n      this.$totalEntris = this._apiHttpService.get(this._apiEndpointsService.getTotalEntriesEndpoint()).pipe(shareReplay());\n      this.$totalEntris.subscribe(data => {\n        thisPtr.totalEntries = data;\n        thisPtr.totalPage = thisPtr.totalEntries / thisPtr.pageSize + 1;\n        thisPtr.isLoading = false;\n      });\n    }\n\n    openSnackBar() {\n      this._snackBar.open(\"Link copied to clipboard!\", \"Close\", {\n        duration: 3000\n      });\n    }\n\n    nextPage() {\n      console.log(\"Go to next\");\n    }\n\n    prevPage() {\n      console.log(\"Go to prev\");\n    }\n\n    getPaginatorData(event) {\n      this.pageIndex = event.pageIndex + 1;\n      this.paginatorIndex = event.pageIndex; // - 1;\n\n      this.pageSize = event.pageSize;\n      this.lowValue = event.pageIndex * event.pageSize;\n      this.highValue = this.lowValue + event.pageSize;\n      this.updateEntry();\n      this.updateTotalEntries(); // this._router.navigate(['/entry'], { queryParams: { index: this.pageIndex }});\n\n      return event;\n    }\n\n  }\n\n  EntryListComponent.ɵfac = function EntryListComponent_Factory(t) {\n    return new (t || EntryListComponent)(i0.ɵɵdirectiveInject(i1.MatSnackBar), i0.ɵɵdirectiveInject(i2.ApiHttpService), i0.ɵɵdirectiveInject(i3.ApiEndpointsService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n\n  EntryListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EntryListComponent,\n    selectors: [[\"app-entry-list\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[\"id\", \"content\", 1, \"content-element\"], [\"class\", \"content-ctn\", \"id\", \"content-ctn-loading\", 4, \"ngIf\"], [\"class\", \"content-ctn\", 4, \"ngIf\"], [\"id\", \"content-ctn-loading\", 1, \"content-ctn\"], [1, \"content-ctn\"], [\"class\", \"content-post-entries-ctn\", 4, \"ngFor\", \"ngForOf\"], [\"aria-label\", \"Select page\", 3, \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\", \"showFirstLastButtons\", \"page\"], [1, \"content-post-entries-ctn\"], [1, \"content-post-entry-ctn\"], [1, \"content-post-entry-head\"], [1, \"content-post-entry-title-ctn\"], [1, \"content-post-entries-title\"], [3, \"routerLink\", \"queryParams\"], [1, \"content-post-entry-meta-ctn\"], [1, \"content-post-entry-meta-btn\"], [\"mat-icon-button\", \"\"], [\"matBadge\", \"768\", \"matBadgeColor\", \"primary\"], [\"matBadgeColor\", \"primary\", 3, \"matBadge\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Copy link\", 3, \"click\"], [1, \"content-post-entry-body\"], [1, \"content-post-entries-content\"], [3, \"innerHTML\", \"ngClass\"], [1, \"content-post-entry-foot\"], [\"id\", \"left\", 1, \"content-post-entry-foot-element\"], [\"mat-button\", \"\", \"color\", \"primary\"], [\"id\", \"right\", 1, \"content-post-entry-foot-element\"]],\n    template: function EntryListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, EntryListComponent_div_1_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, EntryListComponent_div_2_Template, 3, 7, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n      }\n    },\n    directives: [i5.NgIf, i6.MatSpinner, i5.NgForOf, i7.MatPaginator, i8.MatList, i8.MatListItem, i4.RouterLinkWithHref, i9.MatButton, i10.MatIcon, i11.MatBadge, i12.MatTooltip, i5.NgClass],\n    pipes: [i13.ExcerptFilter, i5.DatePipe],\n    styles: [\".content-post-entries-ctn[_ngcontent-%COMP%]{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;padding:20px 10px;margin:0 0 20px}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-title-ctn[_ngcontent-%COMP%]{width:70%;display:inline-block}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-title-ctn[_ngcontent-%COMP%]   .content-post-entries-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-title-ctn[_ngcontent-%COMP%]   .content-post-entries-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace;font-weight:500;font-size:20px}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-title-ctn[_ngcontent-%COMP%]   .content-post-entries-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{font-weight:600}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-meta-ctn[_ngcontent-%COMP%]{width:30%;display:inline-block}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-head[_ngcontent-%COMP%]   .content-post-entry-meta-ctn[_ngcontent-%COMP%]   .content-post-entry-meta-btn[_ngcontent-%COMP%]{width:33%;display:inline-block}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entries-body[_ngcontent-%COMP%]   .content-post-entries-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entries-body[_ngcontent-%COMP%]   .content-post-entries-content[_ngcontent-%COMP%]   p.content-first-post[_ngcontent-%COMP%]{height:150px}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-foot[_ngcontent-%COMP%]   .content-post-entry-foot-element[_ngcontent-%COMP%]{width:50%;display:inline-block}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-foot[_ngcontent-%COMP%]   .content-post-entry-foot-element#left[_ngcontent-%COMP%]{text-align:left}.content-post-entries-ctn[_ngcontent-%COMP%]   .content-post-entry-ctn[_ngcontent-%COMP%]   .content-post-entry-foot[_ngcontent-%COMP%]   .content-post-entry-foot-element#right[_ngcontent-%COMP%]{text-align:right;padding-right:10px}.content-post-entries-ctn[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto}.content-post-entries-ctn[_ngcontent-%COMP%]   mat-list-item.content-post-entries-title[_ngcontent-%COMP%]{width:100%}\"]\n  });\n  return EntryListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}